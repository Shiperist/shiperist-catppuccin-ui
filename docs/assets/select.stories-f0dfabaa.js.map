{"version":3,"file":"select.stories-f0dfabaa.js","sources":["../../../../packages/components/select/src/select.tsx","../../../../packages/components/select/src/select-item.tsx","../../../../packages/components/select/src/select-styles.ts","../../../../packages/components/select/src/select-item-header.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, LegacyRef, useMemo } from \"react\";\nimport { ChevronDownIcon, cn } from \"@shiperist-catppuccin-ui/utilities\";\nimport {\n  SelectProps,\n  SelectItem,\n  selectInputStyles,\n  selectResultClass,\n  SelectItemHeader,\n  selectContainerClass,\n} from \".\";\n\nexport const Select = React.forwardRef<HTMLDivElement, SelectProps>((props, ref) => {\n  const {\n    disabled,\n    defaultValue,\n    variant = \"button\",\n    size = \"medium\",\n    placeholder,\n    value: controlledValue,\n    onChange,\n    className = \"\",\n    children,\n    ...other\n  } = props;\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [showRingEffect, setShowRingEffect] = useState(false);\n  const selectRef = useRef<HTMLDivElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const [selectedValue, setSelectedValue] = useState<string | undefined>(\n    controlledValue !== undefined ? controlledValue : defaultValue\n  );\n\n  useEffect(() => {\n    setSelectedValue(controlledValue !== undefined ? controlledValue : defaultValue);\n  }, [controlledValue, defaultValue]);\n\n  const handleSelectOpen = () => {\n    setIsOpen((prevState) => !prevState);\n    setShowRingEffect(false);\n  };\n\n  const handleSelectItemClick = (itemValue: string) => {\n    if (onChange) {\n      onChange(itemValue);\n      setSelectedValue(itemValue);\n    } else {\n      setSelectedValue(itemValue);\n    }\n    setIsOpen(false);\n    setShowRingEffect(true);\n    selectRef.current?.focus();\n  };\n\n  const handleInputText = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const inputValue = event.target.value;\n    setSelectedValue(inputValue);\n    if (onChange) {\n      onChange(inputValue);\n    }\n  };\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (!selectRef.current?.contains(event.target as Node)) {\n        setIsOpen(false);\n        if (showRingEffect) {\n          setShowRingEffect(false);\n        }\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showRingEffect]);\n\n  const trailingElement = <ChevronDownIcon />;\n  const Element = variant === \"button\" ? \"button\" : \"input\";\n\n  const filteredChildren = useMemo(() => {\n    if (variant === \"input\") {\n      return React.Children.toArray(children).filter((child) => {\n        if (React.isValidElement(child)) {\n          const childContent = String(child.props.children).toLowerCase();\n          const searchValue = String(selectedValue || \"\").toLowerCase();\n          return childContent.includes(searchValue);\n        }\n        return false;\n      });\n    } else {\n      return React.Children.toArray(children);\n    }\n  }, [variant, children, selectedValue]);\n\n  if (variant === \"input\" && filteredChildren.length === 0) {\n    filteredChildren.push(\n      <SelectItem key=\"nothing-found\" size={size} disabled>\n        Nothing found.\n      </SelectItem>\n    );\n  }\n\n  const containerStyles = cn(selectContainerClass(disabled, showRingEffect, size, isOpen), className);\n  const resultStyles = selectResultClass(\n    filteredChildren.filter((child) => React.isValidElement(child)) as React.ReactElement[]\n  );\n\n  return (\n    <div className={cn(\"relative\")} ref={selectRef}>\n      {Element === \"input\" ? (\n        <div className={containerStyles} {...other} style={{ ...other.style }}>\n          <Element\n            ref={ref as LegacyRef<HTMLInputElement>}\n            type=\"text\"\n            disabled={disabled}\n            onClick={!disabled ? handleSelectOpen : undefined}\n            onChange={handleInputText}\n            placeholder={placeholder}\n            defaultValue={controlledValue !== undefined ? controlledValue : selectedValue || defaultValue || \"\"}\n            className={selectInputStyles}></Element>\n          {trailingElement && <div className={cn(\"stroke-overlay2\")}>{trailingElement}</div>}\n        </div>\n      ) : (\n        <Element\n          ref={buttonRef}\n          disabled={disabled}\n          onClick={!disabled ? handleSelectOpen : undefined}\n          className={containerStyles}\n          {...other}>\n          <div className=\"flex-grow text-left\">\n            {placeholder && !selectedValue && !defaultValue ? (\n              <p className=\"text-overlay2\">{placeholder}</p>\n            ) : (\n              <p>{selectedValue || defaultValue}</p>\n            )}\n          </div>\n          {trailingElement && <div className={cn(\"stroke-overlay2 py-1\")}>{trailingElement}</div>}\n        </Element>\n      )}\n      {isOpen && (\n        <div className={resultStyles}>\n          {filteredChildren.map((child: React.ReactElement, index: number) => {\n            const isLastItem = index === filteredChildren.length - 1;\n            const itemStyle = isLastItem ? { borderBottom: 0 } : {};\n\n            return React.cloneElement(child, {\n              onClick: () =>\n                !child.props.disabled && !(child.type === SelectItemHeader)\n                  ? handleSelectItemClick(String(child.props.children))\n                  : undefined,\n              style: itemStyle,\n              size: size,\n            });\n          })}\n        </div>\n      )}\n    </div>\n  );\n});\n\nSelect.displayName = \"Select\";\n","import React from \"react\";\nimport { cn } from \"@shiperist-catppuccin-ui/utilities\";\nimport { SelectItemProps, selectItemClass } from \".\";\n\nexport const SelectItem = React.forwardRef<HTMLDivElement, SelectItemProps>((props, ref) => {\n  const { leadingElement, trailingElement, size, disabled, className = \"\", value, children, ...other } = props;\n\n  const selectItemStyles = cn(selectItemClass(disabled, size), className);\n\n  return (\n    <div ref={ref} className={selectItemStyles} {...other}>\n      {leadingElement && <div className={cn(\"stroke-overlay1 pr-2\")}>{leadingElement}</div>}\n      <div className=\"flex-grow\" style={{ marginLeft: leadingElement ? \"0.2rem\" : 0 }}>\n        {children}\n      </div>\n      {trailingElement && <div className={cn(\"stroke-overlay1 pr-2\")}>{trailingElement}</div>}\n    </div>\n  );\n});\n\nSelectItem.displayName = \"SelectItem\";\n","import { cn } from \"@shiperist-catppuccin-ui/utilities\";\n\nexport const selectSizeClass = {\n  small: \"text-sm h-7\",\n  medium: \"text-md h-8\",\n  large: \"text-lg h-9\",\n};\n\nexport const selectContainerClass = (disabled: boolean, showRingEffect: boolean, size: string, isOpen: boolean) =>\n  cn(\n    \"flex border-overlay0 w-full flex-row items-center px-4 transition-all duration-150 ease-in-out\",\n    selectSizeClass[size] || selectSizeClass.medium,\n    {\n      \"cursor-not-allowed opacity-50\": disabled,\n      \"hover:border-overlay2\": !disabled,\n      \"ring-overlay2 ring\": showRingEffect,\n      \"outline-none border-l border-r border-t rounded-tr-xl rounded-tl-xl border-b\": isOpen,\n      \"border rounded-xl\": !isOpen,\n    }\n  );\nexport const selectInputStyles = cn(\"w-full flex-grow bg-transparent outline-none\");\nexport const selectResultClass = (filteredChildren: React.ReactElement[]) =>\n  cn(\"absolute z-50  flex max-h-[250px] w-full py-1 flex-col overflow-y-auto rounded-bl-xl rounded-br-xl\", {\n    \"border-overlay0 border-l border-b border-r\": filteredChildren.length > 0,\n    \"border-none border-transparent\": filteredChildren.length === 0,\n  });\n\nexport const selectItemClass = (disabled: boolean, size: string) =>\n  cn(\n    \"bg-base text-text flex w-full cursor-pointer max-w-full items-center pl-4 pr-2 text-left transition duration-150 ease-in-out\",\n    selectSizeClass[size] || selectSizeClass.medium,\n    {\n      \"cursor-not-allowed opacity-50\": disabled,\n      \"hover:bg-surface0\": !disabled,\n    }\n  );\nexport const selectItemHeaderClass = () => cn(\"cursor-text font-bold text-sm px-3 text-overlay2\");\n","import React from \"react\";\nimport { SelectItemHeaderProps, selectItemHeaderClass } from \".\";\nimport { cn } from \"@shiperist-catppuccin-ui/utilities\";\n\nexport const SelectItemHeader = React.forwardRef<HTMLSpanElement, SelectItemHeaderProps>((props, ref) => {\n  const { className = \"\", children, ...other } = props;\n  return (\n    <div className={cn(selectItemHeaderClass(), className)}>\n      <span ref={ref} {...other}>\n        {children}\n      </span>\n    </div>\n  );\n});\n\nSelectItemHeader.displayName = \"SelectItemHeader\";\n"],"names":["Select","React","props","ref","disabled","defaultValue","variant","size","placeholder","controlledValue","onChange","className","children","other","isOpen","setIsOpen","useState","showRingEffect","setShowRingEffect","selectRef","useRef","buttonRef","selectedValue","setSelectedValue","useEffect","handleSelectOpen","prevState","handleSelectItemClick","itemValue","_a","handleInputText","event","inputValue","handleClickOutside","trailingElement","ChevronDownIcon","Element","filteredChildren","useMemo","child","childContent","searchValue","SelectItem","containerStyles","cn","selectContainerClass","resultStyles","selectResultClass","jsxs","jsx","selectInputStyles","index","itemStyle","SelectItemHeader","leadingElement","value","selectItemStyles","selectItemClass","selectSizeClass","selectItemHeaderClass"],"mappings":"4fAWO,MAAMA,EAASC,EAAM,WAAwC,CAACC,EAAOC,IAAQ,CAC5E,KAAA,CACJ,SAAAC,EACA,aAAAC,EACA,QAAAC,EAAU,SACV,KAAAC,EAAO,SACP,YAAAC,EACA,MAAOC,EACP,SAAAC,EACA,UAAAC,EAAY,GACZ,SAAAC,EACA,GAAGC,CACD,EAAAX,EAEE,CAACY,EAAQC,CAAS,EAAIC,WAAS,EAAK,EACpC,CAACC,EAAgBC,CAAiB,EAAIF,WAAS,EAAK,EACpDG,EAAYC,SAAuB,IAAI,EACvCC,GAAYD,SAA0B,IAAI,EAC1C,CAACE,EAAeC,CAAgB,EAAIP,EAAA,SACxCP,IAAoB,OAAYA,EAAkBJ,CAAA,EAGpDmB,EAAAA,UAAU,IAAM,CACGD,EAAAd,IAAoB,OAAYA,EAAkBJ,CAAY,CAAA,EAC9E,CAACI,EAAiBJ,CAAY,CAAC,EAElC,MAAMoB,EAAmB,IAAM,CACnBV,EAACW,GAAc,CAACA,CAAS,EACnCR,EAAkB,EAAK,CAAA,EAGnBS,GAAyBC,GAAsB,OAC/ClB,GACFA,EAASkB,CAAS,EAClBL,EAAiBK,CAAS,EAI5Bb,EAAU,EAAK,EACfG,EAAkB,EAAI,GACtBW,EAAAV,EAAU,UAAV,MAAAU,EAAmB,OAAM,EAGrBC,GAAmBC,GAA+C,CAChE,MAAAC,EAAaD,EAAM,OAAO,MAChCR,EAAiBS,CAAU,EACvBtB,GACFA,EAASsB,CAAU,CACrB,EAGFR,EAAAA,UAAU,IAAM,CACR,MAAAS,EAAsBF,GAAsB,QAC3CF,EAAAV,EAAU,UAAV,MAAAU,EAAmB,SAASE,EAAM,UACrChB,EAAU,EAAK,EACXE,GACFC,EAAkB,EAAK,EAE3B,EAGO,gBAAA,iBAAiB,YAAae,CAAkB,EAClD,IAAM,CACF,SAAA,oBAAoB,YAAaA,CAAkB,CAAA,CAC9D,EACC,CAAChB,CAAc,CAAC,EAEb,MAAAiB,IAAmBC,GAAgB,CAAA,CAAA,EACnCC,EAAU9B,IAAY,SAAW,SAAW,QAE5C+B,EAAmBC,EAAAA,QAAQ,IAC3BhC,IAAY,QACPL,EAAM,SAAS,QAAQW,CAAQ,EAAE,OAAQ2B,GAAU,CACpD,GAAAtC,EAAM,eAAesC,CAAK,EAAG,CAC/B,MAAMC,EAAe,OAAOD,EAAM,MAAM,QAAQ,EAAE,cAC5CE,EAAc,OAAOnB,GAAiB,EAAE,EAAE,YAAY,EACrD,OAAAkB,EAAa,SAASC,CAAW,CAC1C,CACO,MAAA,EAAA,CACR,EAEMxC,EAAM,SAAS,QAAQW,CAAQ,EAEvC,CAACN,EAASM,EAAUU,CAAa,CAAC,EAEjChB,IAAY,SAAW+B,EAAiB,SAAW,GACpCA,EAAA,OACdK,EAA+B,CAAA,KAAAnC,EAAY,SAAQ,GAAC,2BAArC,eAEhB,CAAA,EAIE,MAAAoC,EAAkBC,EAAGC,GAAqBzC,EAAUa,EAAgBV,EAAMO,CAAM,EAAGH,CAAS,EAC5FmC,GAAeC,GACnBV,EAAiB,OAAQE,GAAUtC,EAAM,eAAesC,CAAK,CAAC,CAAA,EAGhE,SACG,MAAI,CAAA,UAAWK,EAAG,UAAU,EAAG,IAAKzB,EAClC,SAAA,CAAAiB,IAAY,QACXY,EAAC,MAAI,CAAA,UAAWL,EAAkB,GAAG9B,EAAO,MAAO,CAAE,GAAGA,EAAM,KAAA,EAC5D,SAAA,CAAAoC,EAACb,EAAA,CACC,IAAAjC,EACA,KAAK,OACL,SAAAC,EACA,QAAUA,EAA8B,OAAnBqB,EACrB,SAAUK,GACV,YAAAtB,EACA,aAAcC,IAAoB,OAAYA,EAAkBa,GAAiBjB,GAAgB,GACjG,UAAW6C,EAAA,CAAmB,EAC/BhB,GAAoBe,EAAA,MAAA,CAAI,UAAWL,EAAG,iBAAiB,EAAI,SAAgBV,EAAA,CAAA,CAAA,CAC9E,EAEAc,EAACZ,EAAA,CACC,IAAKf,GACL,SAAAjB,EACA,QAAUA,EAA8B,OAAnBqB,EACrB,UAAWkB,EACV,GAAG9B,EACJ,SAAA,CAAAoC,EAAC,OAAI,UAAU,sBACZ,YAAe,CAAC3B,GAAiB,CAACjB,EACjC4C,EAAC,IAAE,CAAA,UAAU,gBAAiB,SAAYzC,CAAA,CAAA,IAEzC,IAAG,CAAA,SAAAc,GAAiBjB,EAAa,CAEtC,CAAA,EACC6B,GAAoBe,EAAA,MAAA,CAAI,UAAWL,EAAG,sBAAsB,EAAI,SAAgBV,EAAA,CAAA,CAAA,CACnF,EAEDpB,KACE,MAAI,CAAA,UAAWgC,GACb,SAAiBT,EAAA,IAAI,CAACE,EAA2BY,IAAkB,CAElE,MAAMC,GADaD,IAAUd,EAAiB,OAAS,EACxB,CAAE,aAAc,CAAA,EAAM,CAAA,EAE9C,OAAApC,EAAM,aAAasC,EAAO,CAC/B,QAAS,IACP,CAACA,EAAM,MAAM,UAAcA,EAAM,OAASc,EACtC1B,GAAsB,OAAOY,EAAM,MAAM,QAAQ,CAAC,EAClD,OACN,MAAOa,GACP,KAAA7C,CAAA,CACD,CACF,CAAA,EACH,CAEJ,CAAA,CAAA,CAEJ,CAAC,EAEDP,EAAO,YAAc,SC9Jd,MAAM0C,EAAazC,EAAM,WAA4C,CAACC,EAAOC,IAAQ,CACpF,KAAA,CAAE,eAAAmD,EAAgB,gBAAApB,EAAiB,KAAA3B,EAAM,SAAAH,EAAU,UAAAO,EAAY,GAAI,MAAA4C,EAAO,SAAA3C,EAAU,GAAGC,CAAA,EAAUX,EAEjGsD,EAAmBZ,EAAGa,GAAgBrD,EAAUG,CAAI,EAAGI,CAAS,EAEtE,SACG,MAAI,CAAA,IAAAR,EAAU,UAAWqD,EAAmB,GAAG3C,EAC7C,SAAA,CAAAyC,KAAmB,MAAI,CAAA,UAAWV,EAAG,sBAAsB,EAAI,SAAeU,EAAA,EAC/EL,EAAC,MAAI,CAAA,UAAU,YAAY,MAAO,CAAE,WAAYK,EAAiB,SAAW,CAAE,EAC3E,SAAA1C,CACH,CAAA,EACCsB,GAAoBe,EAAA,MAAA,CAAI,UAAWL,EAAG,sBAAsB,EAAI,SAAgBV,EAAA,CACnF,CAAA,CAAA,CAEJ,CAAC,EAEDQ,EAAW,YAAc,aClBlB,MAAMgB,EAAkB,CAC7B,MAAO,cACP,OAAQ,cACR,MAAO,aACT,EAEab,GAAuB,CAACzC,EAAmBa,EAAyBV,EAAcO,IAC7F8B,EACE,iGACAc,EAAgBnD,CAAI,GAAKmD,EAAgB,OACzC,CACE,gCAAiCtD,EACjC,wBAAyB,CAACA,EAC1B,qBAAsBa,EACtB,+EAAgFH,EAChF,oBAAqB,CAACA,CACxB,CACF,EACWoC,GAAoBN,EAAG,8CAA8C,EACrEG,GAAqBV,GAChCO,EAAG,qGAAsG,CACvG,6CAA8CP,EAAiB,OAAS,EACxE,iCAAkCA,EAAiB,SAAW,CAChE,CAAC,EAEUoB,GAAkB,CAACrD,EAAmBG,IACjDqC,EACE,+HACAc,EAAgBnD,CAAI,GAAKmD,EAAgB,OACzC,CACE,gCAAiCtD,EACjC,oBAAqB,CAACA,CACxB,CACF,EACWuD,GAAwB,IAAMf,EAAG,kDAAkD,EChCnFS,EAAmBpD,EAAM,WAAmD,CAACC,EAAOC,IAAQ,CACvG,KAAM,CAAE,UAAAQ,EAAY,GAAI,SAAAC,EAAU,GAAGC,CAAU,EAAAX,EAC/C,OACG+C,EAAA,MAAA,CAAI,UAAWL,EAAGe,GAAyB,EAAAhD,CAAS,EACnD,SAAAsC,EAAC,OAAK,CAAA,IAAA9C,EAAW,GAAGU,EACjB,SAAAD,EACH,CACF,CAAA,CAEJ,CAAC,EAEDyC,EAAiB,YAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}