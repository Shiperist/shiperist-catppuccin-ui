{"version":3,"file":"range.stories-1fc643d0.js","sources":["../../../../packages/components/range/src/range.tsx","../../../../packages/components/range/src/range-styles.ts"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { colorClass } from \"@shiperist-catppuccin-ui/utilities\";\nimport {\n  RangeProps,\n  rangeClass,\n  rangeContainerClass,\n  rangeMainContainerClass,\n  rangeMarkClass,\n  rangeSizePosition,\n  rangeThumbClass,\n  rangeThumbStyles,\n  rangeTooltipClass,\n  rangeTooltipStyle,\n  rangeTrackClass,\n  rangeTrackStyles,\n} from \".\";\n\nexport const Range = React.forwardRef<HTMLInputElement, RangeProps>((props, ref) => {\n  const {\n    disabled,\n    variant = \"base\",\n    appearance = \"outline\",\n    size = \"medium\",\n    defaultValue,\n    tooltip,\n    marks,\n    min = 0,\n    max = 100,\n    step = 1,\n    track = true,\n    className = \"\",\n    ...other\n  } = props;\n\n  const [value, setValue] = useState<number>(defaultValue || 0);\n  const [isDragging, setIsDragging] = useState<boolean>(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const trackWidth = ((value - min) / (max - min)) * 100;\n  const thumbPosition = `calc(${trackWidth}% + (${value === min ? 0 : value === max ? \"-1\" : \"-0.5\"}px))`;\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(Number(event.target.value));\n  };\n\n  const handleMouseDown = () => {\n    setIsDragging(true);\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const handleTrackClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!disabled) {\n      const sliderRect = sliderRef.current?.getBoundingClientRect();\n      if (sliderRect) {\n        const clickPosition = event.clientX - sliderRect.left;\n        const newValue = (clickPosition / sliderRect.width) * (max - min) + min;\n        setValue(Math.min(max, Math.max(min, Math.round(newValue / step) * step)));\n      }\n    }\n  };\n\n  const handleMouseDownTrack = (event: React.MouseEvent<HTMLDivElement>) => {\n    handleTrackClick(event);\n    setIsDragging(true);\n  };\n\n  useEffect(() => {\n    let animationFrameId: number;\n\n    const handleMouseMoveDuringTrackDrag = (event: MouseEvent) => {\n      if (isDragging) {\n        const reactMouseEvent = event as unknown as React.MouseEvent<HTMLDivElement, MouseEvent>;\n        animationFrameId = requestAnimationFrame(() => handleTrackClick(reactMouseEvent));\n      }\n    };\n\n    if (isDragging) {\n      window.addEventListener(\"mousemove\", handleMouseMoveDuringTrackDrag);\n    }\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMoveDuringTrackDrag);\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, [isDragging]);\n\n  const handleMouseEnter = () => {\n    setShowTooltip(true);\n  };\n\n  const handleMouseLeave = () => {\n    setShowTooltip(false);\n  };\n\n  const mainContainerStyles = rangeMainContainerClass(disabled);\n  const rangeStyles = rangeClass(disabled, size);\n  const thumbStyles = rangeThumbClass(disabled, appearance, variant, size);\n  const trackStyles = rangeTrackClass(disabled, colorClass(variant), size);\n  const tooltipStyles = rangeTooltipClass(showTooltip, size);\n\n  const markSymbols = [];\n  const totalSteps = Math.ceil((max - min) / step);\n\n  for (let i = min; i <= max; i += step) {\n    if (markSymbols.length < 30) {\n      const markColor = i <= value ? `bg-white` : `bg-${colorClass(variant)}`;\n      const isFirstMark = i === min;\n      const isLastMark = i === max;\n      const rangeMarkStyles = rangeMarkClass(isFirstMark, isLastMark, size, markColor);\n\n      markSymbols.push(\n        <div\n          key={i}\n          className={rangeMarkStyles}\n          style={{\n            display: markSymbols.length && totalSteps > 30 ? \"none\" : \"block\",\n            left: `${((i - min) / (max - min)) * 100}%`,\n            top: rangeSizePosition[size] || rangeSizePosition.medium,\n            transform: \"translate(-50%, -50%)\",\n          }}\n        />\n      );\n    }\n  }\n\n  return (\n    <div className={rangeContainerClass}>\n      <div className={mainContainerStyles} ref={sliderRef}>\n        <input\n          ref={ref}\n          type=\"range\"\n          value={value}\n          max={max}\n          min={min}\n          step={step}\n          className={rangeStyles}\n          onChange={disabled ? undefined : handleChange}\n          disabled={disabled}\n          {...other}\n        />\n        {/* Thumb */}\n        <div\n          className={thumbStyles}\n          style={rangeThumbStyles(thumbPosition, rangeSizePosition[size] || rangeSizePosition.medium)}\n          onMouseDown={disabled ? undefined : handleMouseDown}\n          onMouseUp={disabled ? undefined : handleMouseUp}\n          onMouseEnter={disabled ? undefined : handleMouseEnter}\n          onMouseLeave={disabled ? undefined : handleMouseLeave}></div>\n        {/* Track */}\n        {track && (\n          <div\n            className={trackStyles}\n            onMouseDown={disabled ? undefined : handleMouseDownTrack}\n            style={rangeTrackStyles(trackWidth, rangeSizePosition[size] || rangeSizePosition.medium)}\n          />\n        )}\n        {marks && markSymbols}\n      </div>\n      {/* Tooltip */}\n      {tooltip && (\n        <div className={tooltipStyles} style={rangeTooltipStyle(showTooltip, trackWidth)}>\n          {Math.round(value)}\n        </div>\n      )}\n    </div>\n  );\n});\n\nRange.displayName = \"Range\";\n","import { cn, colorClass } from \"@shiperist-catppuccin-ui/utilities\";\n\nexport const rangeAppearanceClass = (colorClass: string, appearance: string) => {\n  return (\n    {\n      filled: `bg-${colorClass} border border-base`,\n      outline: \"bg-base border-4\",\n    }[appearance] || \"bg-base border-4\"\n  );\n};\nexport const rangeSizeClass = {\n  small: \"h-1\",\n  medium: \"h-2\",\n  large: \"h-3\",\n};\nexport const rangeThumbSize = {\n  small: \"w-4 h-4\",\n  medium: \"w-5 h-5\",\n  large: \"w-6 h-6\",\n};\nexport const rangeSizePosition = {\n  small: `calc(50% + 4.5px)`,\n  medium: `calc(50% + 2.5px)`,\n  large: `calc(50% - -0.5px)`,\n};\nexport const rangeThumbStyles = (thumbPosition: string, sizePosition: string) => {\n  return {\n    left: thumbPosition,\n    top: sizePosition,\n    transform: \"translate(-50%, -50%)\",\n  };\n};\nexport const rangeTrackStyles = (trackWidth: number, sizePosition: string) => {\n  return {\n    width: `${trackWidth}%`,\n    top: sizePosition,\n    transform: \"translateY(-50%)\",\n  };\n};\nexport const rangeTooltipPosition = {\n  small: \"bottom-1\",\n  medium: \"bottom-2\",\n  large: \"bottom-3\",\n};\nexport const rangeMarkSize = {\n  small: \"w-0.5 h-0.5\",\n  medium: \"w-1 h-1\",\n  large: \"w-0.5 h-2\",\n};\nexport const rangeTooltipStyle = (showTooltip: boolean, trackWidth: number) => {\n  return {\n    width: \"32px\",\n    display: showTooltip ? \"flex\" : \"none\",\n    left: `calc(${trackWidth}% + (${8 - trackWidth * 0.15}px))`,\n    transform: \"translate(-50%, -100%)\",\n  };\n};\nexport const rangeContainerClass = cn(\"flex w-full items-center\");\nexport const rangeMainContainerClass = (disabled: boolean) =>\n  cn(\"relative w-full transition-all\", {\n    \"pointer-not-allowed opacity-50\": disabled,\n  });\nexport const rangeClass = (disabled: boolean, size: string) =>\n  cn(\n    \"bg-surface2 w-full cursor-pointer appearance-none rounded-lg transition-all\",\n    rangeSizeClass[size] || rangeSizeClass.medium,\n    {\n      \"cursor-not-allowed\": disabled,\n    }\n  );\nexport const rangeThumbClass = (disabled: boolean, appearance: string, variant: string, size: string) =>\n  cn(\n    `absolute z-10 ${rangeAppearanceClass(colorClass(variant), appearance)} cursor-pointer rounded-full`,\n    rangeThumbSize[size] || rangeThumbSize.medium,\n    {\n      \"border-overlay1 cursor-not-allowed\": disabled && appearance !== \"filled\",\n      \"bg-overlay0\": disabled && appearance === \"filled\",\n    }\n  );\nexport const rangeTrackClass = (disabled: boolean, colorClass: string, size: string) =>\n  cn(`absolute cursor-pointer rounded-lg bg-${colorClass}`, rangeSizeClass[size] || rangeSizeClass.medium, {\n    \"bg-surface1 cursor-not-allowed\": disabled,\n  });\nexport const rangeTooltipClass = (showTooltip: boolean, size: string) =>\n  cn(\n    \"bg-mantle absolute flex w-4 justify-center rounded px-2 py-1 text-xs text-white\",\n    rangeTooltipPosition[size] || rangeTooltipPosition.medium,\n    {\n      \"pointer-events-none opacity-0\": !showTooltip,\n      \"pointer-events-auto opacity-100\": showTooltip,\n    }\n  );\nexport const rangeMarkClass = (isFirstMark: boolean, isLastMark: boolean, size: string, markColor: string) =>\n  cn(`absolute rounded`, rangeMarkSize[size] || rangeMarkSize.medium, markColor, {\n    \"opacity-0\": isFirstMark || isLastMark,\n  });\n"],"names":["Range","React","props","ref","disabled","variant","appearance","size","defaultValue","tooltip","marks","min","max","step","track","className","other","value","setValue","useState","isDragging","setIsDragging","showTooltip","setShowTooltip","sliderRef","useRef","trackWidth","thumbPosition","handleChange","event","handleMouseDown","handleMouseUp","handleTrackClick","sliderRect","_a","newValue","handleMouseDownTrack","useEffect","animationFrameId","handleMouseMoveDuringTrackDrag","reactMouseEvent","handleMouseEnter","handleMouseLeave","mainContainerStyles","rangeMainContainerClass","rangeStyles","rangeClass","thumbStyles","rangeThumbClass","trackStyles","rangeTrackClass","colorClass","tooltipStyles","rangeTooltipClass","markSymbols","totalSteps","i","markColor","rangeMarkStyles","rangeMarkClass","jsx","rangeSizePosition","jsxs","rangeContainerClass","rangeThumbStyles","rangeTrackStyles","rangeTooltipStyle","rangeAppearanceClass","rangeSizeClass","rangeThumbSize","sizePosition","rangeTooltipPosition","rangeMarkSize","cn","isFirstMark","isLastMark"],"mappings":"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"}